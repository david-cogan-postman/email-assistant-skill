---
phase: 02-robust-handling
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified: [SKILL.md]
autonomous: true

must_haves:
  truths:
    - "Skill suggests relevant Postman documentation links based on call topics"
    - "Resource suggestions are inline (1-3) or grouped (4+) based on quantity"
    - "Attachment reminder appears when transcript mentions presentation word + sharing word"
    - "Attachment placeholder names the specific item from context (e.g., [ATTACH: onboarding deck])"
    - "No attachment reminder when item only referenced (not promised to send)"
  artifacts:
    - path: "SKILL.md"
      provides: "Complete Phase 2 skill with resource library and attachment detection"
      contains: "<resource_library>"
  key_links:
    - from: "SKILL.md resource_matching"
      to: "SKILL.md resource_library"
      via: "Topic keywords map to curated URLs"
      pattern: "IF transcript mentions"
    - from: "SKILL.md attachment_detection"
      to: "Email generation"
      via: "Two-condition rule triggers placeholder insertion"
      pattern: "PRESENTATION.*AND.*SHARING"
---

<objective>
Add embedded Postman resource library with contextual matching and semantic attachment detection to SKILL.md

Purpose: Enable the skill to automatically suggest relevant Postman documentation links based on call topics and remind about promised attachments using the two-condition rule (presentation word + sharing word).

Output: Complete Phase 2 SKILL.md with resource_library, resource_matching, and attachment_detection sections
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-robust-handling/02-CONTEXT.md
@.planning/phases/02-robust-handling/02-RESEARCH.md
@.planning/phases/02-robust-handling/02-01-SUMMARY.md
@SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Postman resource library and contextual matching logic</name>
  <files>SKILL.md</files>
  <action>
Add two new XML-structured sections to SKILL.md after the `<clarification_protocol>` section:

1. **Add `<resource_library>` section** with curated Postman documentation URLs organized by category:

   **Verification and Publishing:**
   - Verification Checklist: https://www.postman.com/publisher/settings/verification
     Topics: publishing, verification, public API, submit to network
   - Public API Network: https://www.postman.com/explore
     Topics: discover, explore, public APIs, showcase

   **Documentation and Notebooks:**
   - Creating Notebooks: https://learning.postman.com/docs/publishing-your-api/creating-notebooks/
     Topics: documentation, notebooks, markdown, visualizations
   - Visualizer: https://learning.postman.com/docs/sending-requests/visualizer/
     Topics: visualize responses, charts, data display
   - Collection Documentation: https://learning.postman.com/docs/publishing-your-api/documenting-your-api/
     Topics: document APIs, auto-generate docs

   **Testing and Automation:**
   - Writing Tests: https://learning.postman.com/docs/writing-scripts/test-scripts/
     Topics: testing, assertions, scripts, validation
   - Newman CLI: https://learning.postman.com/docs/running-collections/using-newman-cli/
     Topics: automation, CI/CD, command line, continuous integration
   - Collection Runs: https://learning.postman.com/docs/running-collections/intro-to-collection-runs/
     Topics: batch testing, run multiple requests, data-driven

   **Collaboration:**
   - Workspaces: https://learning.postman.com/docs/collaborating-in-postman/using-workspaces/
     Topics: team collaboration, shared workspace, organize work
   - Comments and Tagging: https://learning.postman.com/docs/collaborating-in-postman/working-with-your-team/commenting/
     Topics: feedback, reviews, team communication

   **Run in Postman:**
   - Run in Postman Button: https://learning.postman.com/docs/publishing-your-api/run-in-postman/introduction-run-button/
     Topics: embed, share collections, Run in Postman, integrate

   **Enterprise:**
   - SSO Configuration: https://learning.postman.com/docs/administration/sso/intro-sso/
     Topics: single sign-on, authentication, enterprise security
   - SCIM Provisioning: https://learning.postman.com/docs/administration/scim-provisioning/
     Topics: user management, provisioning, enterprise admin

2. **Add `<resource_matching>` section** with matching logic:
   - Review topics discussed in call transcript
   - Match to resources using topic keywords from library
   - DIRECTLY RELEVANT (inline, 1-3 links): Topics explicitly discussed, problems mentioned
   - ALSO USEFUL (grouped section, if 4+ total): Adjacent topics, related features
   - No hard limit - typically 3-7 based on call content
   - Use descriptive anchor text from conversation, not generic text
   - Example inline: "As discussed, the [verification checklist](url) walks through..."
   - Example grouped: "Here are the resources we discussed:\n- [Verification checklist](url)..."
   - Quality guideline: "Better to suggest 3 perfect resources than 7 maybe-relevant ones"

Reference RESEARCH.md "Example 4: Embedded Resource Library with Contextual Matching" for exact structure.
  </action>
  <verify>
Read SKILL.md and confirm:
- `<resource_library>` section exists with 12+ categorized resources
- Each resource has URL and topic keywords
- `<resource_matching>` section exists with inline vs grouped logic
- Quality guidelines present (3 perfect > 7 maybe-relevant)
  </verify>
  <done>
SKILL.md contains curated Postman resource library with 12+ resources organized by category, and contextual matching logic for inline (1-3) vs grouped (4+) resource suggestions
  </done>
</task>

<task type="auto">
  <name>Task 2: Add attachment detection with two-condition rule</name>
  <files>SKILL.md</files>
  <action>
Add `<attachment_detection>` section after `<resource_matching>` in SKILL.md:

1. **Document the two-condition rule:**
   - Attachment reminder ONLY when transcript contains BOTH:
     - PRESENTATION words: deck, slides, presentation, PDF, document, file, materials, spreadsheet
     - SHARING words: send, share, attach, forward, email you, get you, provide

2. **Include detection examples:**
   - "I'll send over the onboarding deck" -> YES (deck + send over) -> [ATTACH: onboarding deck]
   - "Let me share those slides with you" -> YES (slides + share) -> [ATTACH: slides]
   - "The deck from last week showed..." -> NO (deck but no sharing promise)
   - "We looked at the roadmap" -> NO (no sharing promise)

3. **Add semantic understanding guidance:**
   - Variations that count as SHARING: "I'll get you that", "Forward the materials", "You'll receive"
   - Use Claude's natural language understanding, not exact keyword matches

4. **Define placeholder format:**
   - Name attachment based on context: "[ATTACH: integration guide]" not generic "[ATTACHMENT]"
   - Placement: inline, separate line, or with action item - wherever natural

5. **Handle multiple attachments:**
   - Separate placeholder for each item promised
   - "I'll send the deck and the case study" -> [ATTACH: deck], [ATTACH: case study]

6. **Update existing "Attachments Mentioned" edge case** to reference this section:
   - Change from simple "Include a line" to "See `<attachment_detection>` for when and how to add attachment placeholders"

Reference RESEARCH.md "Example 5: Semantic Attachment Detection" for exact structure.
  </action>
  <verify>
Read SKILL.md and confirm:
- `<attachment_detection>` section exists with two-condition rule
- PRESENTATION and SHARING word lists present
- Detection examples showing YES/NO cases
- Placeholder naming uses context (not generic)
- Edge case cross-references attachment_detection
  </verify>
  <done>
SKILL.md contains attachment detection with two-condition rule (presentation + sharing words), semantic understanding guidance, context-aware placeholder naming, and multiple attachment handling
  </done>
</task>

<task type="auto">
  <name>Task 3: Update extraction schema and email structure for Phase 2</name>
  <files>SKILL.md</files>
  <action>
Make targeted updates to existing sections to integrate Phase 2 features:

1. **Update Extraction Schema - add Topics subsection:**
   After "### Call Context" in the extraction schema, add:
   ```
   ### Topics Discussed
   - **Technical topics:** Features, products, capabilities discussed (for resource matching)
   - **Problems mentioned:** Challenges or questions raised (for resource suggestions)
   - **Solutions proposed:** What was offered or demonstrated

   This section drives contextual resource suggestions - extract generously.
   ```

2. **Update Email Structure - Body Sections:**
   In "### Body Sections", ensure Resources Section mentions:
   - "Use `<resource_matching>` logic to determine inline vs grouped format"
   - "Include curated Postman links from `<resource_library>` based on topics discussed"

3. **Update Email Structure - Attachments Note:**
   Change to:
   - "See `<attachment_detection>` for two-condition rule"
   - "Use [ATTACH: item name] placeholder when materials were promised"

4. **Update frontmatter description** to complete Phase 2 capabilities:
   - Ensure description includes: "suggests relevant Postman documentation links" and "reminds about promised attachments"
  </action>
  <verify>
Read SKILL.md and confirm:
- Extraction schema has "### Topics Discussed" subsection
- Email structure references resource_matching and resource_library
- Attachments Note references attachment_detection
- Description includes resource suggestions and attachment reminders
  </verify>
  <done>
SKILL.md extraction schema includes topics for resource matching, email structure references new Phase 2 sections, and frontmatter description reflects complete Phase 2 capabilities
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. Read full SKILL.md and confirm all XML sections properly opened and closed
2. Verify resource library URLs are valid format (https://...)
3. Confirm cross-references between sections are accurate
4. Test that the skill remains well-formed markdown
5. Count total lines - should be approximately 500-700 lines (up from ~280)
</verification>

<success_criteria>
- SKILL.md has `<resource_library>` section with 12+ categorized Postman resources
- SKILL.md has `<resource_matching>` section with inline vs grouped logic
- SKILL.md has `<attachment_detection>` section with two-condition rule
- Extraction schema includes topics for resource matching
- Email structure references Phase 2 sections appropriately
- Description updated to reflect complete Phase 2 capabilities
- All Phase 1 content preserved (examples, formatting rules, anti-hallucination rules)
- Skill file is coherent and well-structured
</success_criteria>

<output>
After completion, create `.planning/phases/02-robust-handling/02-02-SUMMARY.md`
</output>
